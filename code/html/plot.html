<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <!-- Load d3.js -->
  <script src="https://d3js.org/d3.v4.js"></script>
</head>
<body>
  <!-- Create a div where the graph will take place -->
  <div style="margin:50px"><svg id="canvas"></svg></div>
  <script>
  // set the dimensions and margins of the graph
  var margin = { top: 20, right: 30, bottom: 30, left: 40},
    width = 500
    height = 200;
  // select the html element to add the attributes
  var svg = d3.select('#canvas')
    .attr("width", width + margin.left + margin.right) 
  // you have to set at least the width and height?
    .attr("height", height + margin.top + margin.bottom )
  // load the data
  var df = d3.csv(
    "https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered_comma.csv",
    // When reading the csv, I must format variables:
    function (d) {
      return { date: d3.timeParse("%Y-%m-%d")(d.date), value: d.value };
    },
    function (data) {
      // adding xAxis 
      var xScale = d3
        .scaleTime()
        .domain(d3.extent(data, function(d) {return d.date}))
        .range([margin.left, width])
      var xAxis = d3.axisBottom(xScale)
        .ticks(width/80)
        .tickSizeOuter(0) // this removes the outer tick size
        .tickFormat(d3.timeFormat('%Y'))
      // appending it to the svg object
      svg
        .append("g")
        .attr("transform", "translate(0,"+ height +")") // ??
        .call(xAxis);
      // adding yAxis 
      var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(data, function(d) {return +d.value})])
        .range([height, margin.top]);
      // 
      var yAxis = d3
        .axisLeft(yScale)
      // add the axis to the svg
      svg
        .append("g")
        .attr("transform", "translate("+ margin.left +", 0)") // ??
        .call(yAxis);
      // PLOTTING STUFF
      svg
        .append("path")
        .datum(data)
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 1.5)
        .attr(
          "d",
          d3
            .line()
            .x(function (d) {
              return xScale(d.date);
            })
            .y(function (d) {
              return yScale(d.value);
            })
        );
    }
  );

  console.log(df)
  </script>
</body>
</html>
