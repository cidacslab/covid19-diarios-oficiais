<!DOCTYPE html>
<html>
  <body>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    
    <h2>Hello World</h2>

    <svg width="300px" height="300px"></svg>

    <script>
      /*
      d3.select('h2').style('font-size', '50px');
      // selecting unordered list
      var heroes = ['hulk', 'strange', 'america']
      d3.select('ul')
        .selectAll('li')
        .data(heroes) // append this data
        .enter() // look through all the list item
        .append('li') // we wanna append li elementsa
        .text(h => h + ' !'); // we wanna append the text
      // most basic graph
      var numbers = [20, 30, 50, 30, 10, 90]
      var barHeight = 40; //highest bar?
      d3.select("svg")
        .selectAll("rect") // we are going to be adding rectangles
        .data(numbers)
        .enter()
        .append('rect') // we will be appending rectangles
        .attr('width', d=>d) // TODO: google what this means
        .attr('height', barHeight -4)
        .attr('transform', (d, i) => "translate(100," + i * barHeight + ")");
      */
      // copying https://observablehq.com/@d3/histogram (d3 histogram tutorial)
      // set margin
      margin = ({top: 20, right: 20, bottom: 30, left: 40})
      // set height
      height = 500
      width = 500
      // set yAxis
      yAxis = g => g
        .attr('transform', `translate(${margin.left},0)`)
        .call(d3.axisLeft(y).ticks(height / 40))
        .call(g => g.select('.domain').remove())
        .call(g => g.select('.tick:last-of-type text').clone()
          .attr('x', 4)
          .attr('text-anchor', 'start')
          .attr('font-weight', 'bold')
          .text(data.y)
        )
      xAxis = g => g
        .attr('transform', `translate(0,${height - margin.bottom})`)
        .call(d3.axisBottom(x).ticks(width / 80).tickSizeOuter(0))
        .call(g => g.append('text')
          .attr('x', width - margin.right)
          .attr('y', -4)
          .attr('fill', 'currentColor')
          .attr('font-weight', bold)
          .attr('text-anchor', 'end')
          .text(data.x)
        )
      
      // set data
      data = Object.assign(
        [5.1, 4.9, 8.6, 6.2, 5.1, 7.1, 6.7, 6.1, 5, 5, 5.2, 7.9, 11.1, 5.9, 5.5, 5.6, 6.5, 7.7],
        {x: "unemp (%)", y: "countries"}
      )
      // set x
      x = d3.scaleLinear()
            .domain(d3.extent(data)).nice()
            .range([margin.left, width - margin.right])
      // set bins
      bins = d3.histogram()
                .domain(x.domain())
                .thresholds(x.ticks(40))
              (data)
      // set y
      y = d3.scaleLinear()
            .domain([0, d3.max(bins, d=>d.length)]).nice()
            .range([height - margin.bottom, margin.top])
      
      // select svg
      alert('works')
    
    </script>
  </body>
</html>
